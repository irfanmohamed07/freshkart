<%- include('../partials/header') %>

    <div class="container max-w-[1280px] mx-auto px-4 md:px-10 py-8 min-h-screen">
        <!-- Page title and filters -->
        <div
            class="flex flex-col md:flex-row md:items-end justify-between mb-8 pb-8 border-b border-[#dbdfe6] dark:border-gray-800">
            <div>
                <h1 class="text-3xl font-bold mb-2 text-[#111318] dark:text-white">Service Centers & Stores</h1>
                <p class="text-gray-500 dark:text-gray-400">Find trusted mechanics and parts shops near you.</p>
            </div>
            <div class="mt-4 md:mt-0 flex flex-wrap gap-2 text-sm">
                <div class="relative">
                    <select
                        class="appearance-none border border-[#dbdfe6] dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 py-2.5 px-4 pr-8 rounded-lg focus:ring-primary focus:border-primary cursor-pointer shadow-sm">
                        <option>Sort By: Recommended</option>
                        <option>Rating: High to Low</option>
                        <option>Distance: Nearest</option>
                    </select>
                    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-500">
                        <span class="material-symbols-outlined text-sm">expand_more</span>
                    </div>
                </div>
                <div class="relative">
                    <select
                        class="appearance-none border border-[#dbdfe6] dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 py-2.5 px-4 pr-8 rounded-lg focus:ring-primary focus:border-primary cursor-pointer shadow-sm">
                        <option>Filter By: All</option>
                        <option>Open Now</option>
                        <option>Official Dealer</option>
                    </select>
                    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-500">
                        <span class="material-symbols-outlined text-sm">expand_more</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Shop categories chips -->
        <div class="flex flex-wrap gap-2 mb-8">
            <a href="#"
                class="bg-primary text-white px-4 py-2 rounded-full text-sm font-semibold shadow-md ring-2 ring-offset-2 ring-primary border border-transparent">All</a>
            <a href="#"
                class="bg-white dark:bg-gray-800 border border-[#dbdfe6] dark:border-gray-700 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-full text-sm font-semibold hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">Mechanics</a>
            <a href="#"
                class="bg-white dark:bg-gray-800 border border-[#dbdfe6] dark:border-gray-700 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-full text-sm font-semibold hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">Parts
                Stores</a>
            <a href="#"
                class="bg-white dark:bg-gray-800 border border-[#dbdfe6] dark:border-gray-700 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-full text-sm font-semibold hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">Car
                Wash</a>
            <a href="#"
                class="bg-white dark:bg-gray-800 border border-[#dbdfe6] dark:border-gray-700 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-full text-sm font-semibold hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">Detailing</a>
        </div>

        <!-- Shops List -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <% shops.forEach(shop=> { %>
                <a href="/shops/<%= shop.id %>"
                    class="group bg-white dark:bg-gray-800 rounded-xl overflow-hidden border border-[#dbdfe6] dark:border-gray-700 hover:shadow-xl transition-all duration-300 flex flex-col h-full">
                    <div
                        class="relative h-48 overflow-hidden bg-gray-100 dark:bg-gray-900 border-b border-[#dbdfe6] dark:border-gray-700">
                        <% if (shop.logo) { %>
                            <img src="<%= shop.logo %>" alt="<%= shop.name %>"
                                class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
                            <% } else { %>
                                <div class="w-full h-full flex items-center justify-center text-gray-300">
                                    <span class="material-symbols-outlined text-6xl">storefront</span>
                                </div>
                                <% } %>
                                    <!-- Verified badge -->
                                    <div class="absolute top-3 left-3">
                                        <span
                                            class="bg-white/90 backdrop-blur-sm text-primary text-xs font-bold px-2 py-1 rounded flex items-center shadow-sm">
                                            <span class="material-symbols-outlined text-sm mr-1">verified</span>
                                            Verified
                                        </span>
                                    </div>
                    </div>
                    <div class="p-5 flex-1 flex flex-col">
                        <div class="flex justify-between items-start mb-2">
                            <h3
                                class="text-lg font-bold text-[#111318] dark:text-white line-clamp-1 group-hover:text-primary transition-colors">
                                <%= shop.name %>
                            </h3>
                            <div class="flex items-center text-sm px-1.5 py-0.5 bg-gray-100 dark:bg-gray-700 rounded">
                                <span class="text-[#111318] dark:text-white font-bold mr-1">4.5</span>
                                <span class="material-symbols-outlined text-yellow-500 text-sm">star</span>
                            </div>
                        </div>
                        <div class="text-gray-500 dark:text-gray-400 text-sm mb-4 flex items-start flex-1">
                            <span class="material-symbols-outlined text-sm mr-1 mt-0.5 text-gray-400">location_on</span>
                            <span class="line-clamp-2">
                                <%= shop.address %>
                            </span>
                        </div>

                        <div
                            class="border-t border-[#dbdfe6] dark:border-gray-700 pt-4 flex items-center justify-between text-xs text-gray-500 dark:text-gray-400">
                            <div class="flex items-center">
                                <span class="material-symbols-outlined text-sm mr-1">schedule</span>
                                <span>Open Now</span>
                            </div>
                            <div class="flex items-center text-green-600 font-bold">
                                <span class="material-symbols-outlined text-sm mr-1">check_circle</span>
                                <span>Certified</span>
                            </div>
                        </div>
                    </div>
                </a>
                <% }) %>
        </div>

        <% if (shops.length===0) { %>
            <div
                class="bg-gray-50 dark:bg-gray-800/50 p-12 rounded-xl border border-dashed border-gray-300 dark:border-gray-700 text-center">
                <span class="material-symbols-outlined text-6xl text-gray-300 mb-4">search_off</span>
                <h2 class="text-xl font-bold mb-2 text-[#111318] dark:text-white">No service centers found</h2>
                <p class="text-gray-500 dark:text-gray-400 mb-6 max-w-md mx-auto">We couldn't find any results matching
                    your search. Try adjusting your filters or search area.</p>
                <button
                    class="bg-primary text-white font-bold px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors">
                    Clear All Filters
                </button>
            </div>
            <% } %>

                <% if (pagination.totalPages> 1) { %>
                    <div class="mt-12 flex justify-center">
                        <nav class="inline-flex rounded-lg shadow-sm">
                            <% if (pagination.page> 1) { %>
                                <a href="/shops?page=<%= pagination.page - 1 %>"
                                    class="px-4 py-2 border border-[#dbdfe6] dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-l-lg flex items-center gap-1 font-medium transition-colors">
                                    <span class="material-symbols-outlined text-base">chevron_left</span> Previous
                                </a>
                                <% } else { %>
                                    <span
                                        class="px-4 py-2 border border-[#dbdfe6] dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-400 cursor-not-allowed rounded-l-lg flex items-center gap-1 font-medium">
                                        <span class="material-symbols-outlined text-base">chevron_left</span> Previous
                                    </span>
                                    <% } %>

                                        <% for (let i=1; i <=pagination.totalPages; i++) { %>
                                            <% if (i===pagination.page) { %>
                                                <span
                                                    class="px-4 py-2 border border-primary bg-primary text-white font-bold">
                                                    <%= i %>
                                                </span>
                                                <% } else if (i===1 || i===pagination.totalPages || (i>= pagination.page
                                                    - 1 && i <= pagination.page + 1)) { %>
                                                        <a href="/shops?page=<%= i %>"
                                                            class="px-4 py-2 border border-[#dbdfe6] dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors font-medium">
                                                            <%= i %>
                                                        </a>
                                                        <% } else if (i===pagination.page - 2 || i===pagination.page +
                                                            2) { %>
                                                            <span
                                                                class="px-4 py-2 border border-[#dbdfe6] dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-400">
                                                                ...
                                                            </span>
                                                            <% } %>
                                                                <% } %>

                                                                    <% if (pagination.page < pagination.totalPages) { %>
                                                                        <a href="/shops?page=<%= pagination.page + 1 %>"
                                                                            class="px-4 py-2 border border-[#dbdfe6] dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-r-lg flex items-center gap-1 font-medium transition-colors">
                                                                            Next <span
                                                                                class="material-symbols-outlined text-base">chevron_right</span>
                                                                        </a>
                                                                        <% } else { %>
                                                                            <span
                                                                                class="px-4 py-2 border border-[#dbdfe6] dark:border-gray-700 bg-gray-50 dark:bg-gray-900 text-gray-400 cursor-not-allowed rounded-r-lg flex items-center gap-1 font-medium">
                                                                                Next <span
                                                                                    class="material-symbols-outlined text-base">chevron_right</span>
                                                                            </span>
                                                                            <% } %>
                        </nav>
                    </div>
                    <% } %>
    </div>

    <%- include('../partials/footer') %>